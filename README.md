## Лабораторная работа №4 — Дженерики, интерфейсы и обработка коллекций
Описание проекта

Проект представляет собой набор учебных задач на языке Java, направленных на закрепление навыков работы с:

обобщёнными типами (Generics),

функциональными интерфейсами (Mapper, Reducer, Tester),

операциями над коллекциями (map, filter, reduce),

консольным вводом и валидацией данных,

принципами ООП (инкапсуляция, композиция, неизменяемость).

Программа выполняет демонстрацию последовательности блоков, где каждый блок реализует отдельную задачу лабораторной работы.
Все исходные данные вводятся с клавиатуры там, где это логично; предусмотрена проверка корректности ввода.
Все классы организованы в одном проекте, каждый — в отдельном .java файле.

Состав проекта (файлы)
```java
Main.java — точка входа, демонстрация всех блоков.
Box.java — обобщённая коробка (Box<T>).
Storage.java — неизменяемое хранилище (Storage<T>) с альтернативным значением.
Mapper.java — функциональный интерфейс для операции map.
Reducer.java — функциональный интерфейс для операции reduce.
Tester.java — функциональный интерфейс-предикат для filter.
GenericUtils.java — статические обобщённые утилиты: map, filter, reduce, safeReduce.
PutPointUtils.java — утилита для демонстрации wildcard (Box<? super Point3D>) и работы с точками.
Point3D.java — immutable трёхмерная точка.
InputUtils.java — утилиты для безопасного ввода и валидации.
README.md — данный отчёт.
```
## Блок 1 — Обобщённая коробка (Box)
Задача: Создание класса, хранящего объект произвольного типа

Создать класс Box<T>, который хранит ровно один объект типа T в один момент времени.
Реализовать методы для помещения и извлечения объекта, проверку на заполненность и корректное поведение при ошибках.

Реализация:
```java
Класс Box<T> с полем T item;

Конструкторы:
Box() — создаёт пустую коробку;
Box(T initial) — создаёт коробку с начальным значением.

Методы:
void put(T item) — помещает объект в коробку, если она пуста; иначе выбрасывает исключение.
T get() — возвращает объект и очищает коробку.
boolean hasItem() — проверяет, есть ли объект.
boolean isEmpty() — проверяет пустая ли коробка.
String toString() — выводит содержимое коробки.
```
Пример работы программы:
```java
--- Задание 1: Box<T> ---
Положено в коробку: Box{item=3}
Извлечено из коробки: 3
После извлечения hasItem() = false
```
## Блок 2 — Неизменяемое хранилище (Storage)
Задача: Создание безопасного хранилища без null

Создать неизменяемое хранилище Storage<T>, которое может содержать null,
но предоставляет безопасные методы для извлечения значения с альтернативой.

Реализация:
```java
Класс Storage<T> с полем private final T value;

Конструктор:
Storage(T value) — задаёт значение (возможно null).

Методы:
T get() — возвращает хранимое значение (может быть null);
T getOrElse(T alternative) — возвращает хранимое значение или альтернативное;
T getOrElseGet(Supplier<T> supplier) — возвращает значение или вычисляет альтернативу;
String toString() — возвращает строковое представление.
```

Пример работы программы:
```java
--- Задание 2: Storage<T> ---
Storage<Integer>(null) -> getOrElse(0): 0
Storage<Integer>(99) -> getOrElse(-1): 99
Storage<String>(null) -> getOrElse("default"): default
Storage<String>("hello") -> getOrElse("hello world"): hello
```

## Блок 3 — Фильтрация (Filter)
Задача: Реализация обобщённого фильтра

Создать функциональный интерфейс Tester<T> и реализовать утилиту для фильтрации списка элементов по условию.

Реализация:
```java
Интерфейс Tester<T>:
@FunctionalInterface
public interface Tester<T> {
    boolean test(T value);
}

Метод фильтрации в GenericUtils:
public static <T> List<T> filter(List<T> list, Tester<T> tester)

Описание:
Проходит по списку list, вызывает tester.test(element),
добавляет элемент в новый список при положительном результате.
Возвращает новый список. При null входном списке возвращает пустой список.
```
Пример работы программы:
```java
--- Задание 3: putRandomPoint(Box<? super Point3D>) ---
После putRandomPoint содержимое коробки: Box{item=Point3D{x=5,960, y=7,670, z=6,320}}
Извлечено из коробки: Point3D{x=5,960, y=7,670, z=6,320}
```
## Блок 4 — Map и Reduce (Mapper, Reducer, GenericUtils)
Задача: Реализация операций отображения и свёртки коллекций

Реализовать интерфейсы Mapper<T, R> и Reducer<T>, а также методы map(), reduce() и safeReduce() в классе GenericUtils.

Реализация:
```java
Интерфейс Mapper<T, R>:
@FunctionalInterface
public interface Mapper<T, R> {
    R map(T value);
}

Интерфейс Reducer<T>:
@FunctionalInterface
public interface Reducer<T> {
    T reduce(T a, T b);
}

Методы в GenericUtils:
public static <T, R> List<R> map(List<T> list, Mapper<T, R> mapper)
— возвращает список, где каждый элемент преобразован функцией mapper.

public static <T> T reduce(List<T> list, Reducer<T> reducer)
— последовательно сворачивает список с помощью reducer.

public static <T> T safeReduce(List<T> list, Reducer<T> reducer, Supplier<T> identity)
— аналог reduce, но с начальными значением identity.get(),
работает безопасно даже с пустым списком.
```
Пример работы программы:
```java
--- Задание 4: map — примеры ---
Часть 1: введите количество строк (0..1000): 3
Введите строки:
  [1/3]: qwerty
  [2/3]: asdfg
  [3/3]: zx
Длины строк: [6, 5, 2]

Часть 2: введите количество целых чисел (0..1000): 3
  Введите целое 1/3: 1
  Введите целое 2/3: -3
  Введите целое 3/3: 7
Преобразованные (abs): [1, 3, 7]

Часть 3: введите количество массивов (0..100): 3
  Длина массива 1: 3
  Ввод элементов массива:
  Элемент 1/3: -1
  Элемент 2/3: 0
  Элемент 3/3: -5
  Длина массива 2: 3
  Ввод элементов массива:
  Элемент 1/3: -4
  Элемент 2/3: 3
  Элемент 3/3: 2
  Длина массива 3: 2
  Ввод элементов массива:
  Элемент 1/2: -2
  Элемент 2/2: -9
Максимумы для каждого массива: [0, 3, -2]
```
## Блок 5 — Работа с точками и дженериками (Point3D, PutPointUtils)
Задача: Демонстрация работы wildcard и передачи объектов в обобщённые контейнеры

Создать класс Point3D для представления точки в трёхмерном пространстве и утилиту PutPointUtils,
которая демонстрирует работу с контейнерами Box<? super Point3D>.

Реализация:
```java
Класс Point3D:
Поля: double x, y, z;
Конструкторы: Point3D(double x, double y, double z);
Методы: getters, toString().

Класс PutPointUtils:
Метод putPoint(Box<? super Point3D> box, Point3D point)
— помещает объект Point3D в коробку с wildcard ? super Point3D;
Метод printBox(Box<?> box)
— выводит содержимое любой коробки.
```
Пример работы программы:
```java
--- Задание 5: filter — примеры ---
Часть 1: введите количество строк (0..1000): qwerty
Неверный ввод. Введите целое число.
Часть 1: введите количество строк (0..1000): 3
Введите строки:
  [1/3]: qwerty
  [2/3]: asdfg
  [3/3]: zx
Результат: [qwerty, asdfg]

Часть 2: введите количество чисел (0..1000): 3
  Число 1/3: 1
  Число 2/3: -3
  Число 3/3: 7
Результат (<=0): [-3]

Часть 3: введите количество массивов (0..100): 3
  Длина массива 1: -1
Число должно быть в диапазоне [0, 10000].
  Длина массива 1: 3
  Ввод элементов массива:
  Элемент 1/3: -1
  Элемент 2/3: 0
  Элемент 3/3: -5
  Длина массива 2: 3
  Ввод элементов массива:
  Элемент 1/3: 2
  Элемент 2/3: -4
  Элемент 3/3: 3
  Длина массива 3: 2
  Ввод элементов массива:
  Элемент 1/2: -2
  Элемент 2/2: -9
Массивы без положительных элементов:
[-1, 0, -5]
[-2, -9]
```
## Блок 6 — Безопасный ввод (InputUtils)
Задача: Реализация универсальных методов для безопасного ввода данных

Создать утилитный класс InputUtils, обеспечивающий:

ввод строк и чисел с консоли,

обработку ошибок ввода,

повтор запроса при некорректном вводе,

ограничение диапазонов для числовых значений.

Реализация:
```java
Класс InputUtils:
Методы:
static String readString(Scanner sc, String prompt)
— считывает непустую строку;

static int readInt(Scanner sc, String prompt, int min, int max)
— считывает целое число в диапазоне [min, max];

static double readDouble(Scanner sc, String prompt)
— считывает число с плавающей точкой;

Все методы валидируют ввод и перезапрашивают при ошибке.
```
Пример работы программы:
```java
--- Задание 6: reduce/safeReduce ---
Часть 1: введите количество строк (0..1000): 3
Введите строки:
  [1/3]: qwerty
  [2/3]: asdfg
  [3/3]: zx
Результат конкатенации: qwertyasdfgzx

Часть 2: введите количество чисел (0..1000): 3
  Число 1/3: 1
  Число 2/3: -3
  Число 3/3: 7
Сумма: 5

Часть 3: введите количество вложенных списков (0..100): 2
  Длина вложенного списка 1: 2
    Элемент 1/2: 1
    Элемент 2/2: 2
  Длина вложенного списка 2: 3
    Элемент 1/3: 3
    Элемент 2/3: 4
    Элемент 3/3: 5
Общее количество элементов во всех списках: 5
```
## Блок 7 — Проверка работы всех методов (Main)
Задача: Демонстрация работы всех классов и методов

Класс Main организует дружественный интерфейс для демонстрации:

создания и работы с Box и Storage;

выполнения операций filter, map, reduce;

демонстрации wildcard через PutPointUtils;

примеров корректной и некорректной валидации ввода.

Реализация:
```java
Класс Main:
1. Инициализация Scanner для работы с консолью;
2. Последовательная демонстрация блоков 1–6;
3. Проверка корректности ввода и вывода данных;
4. Вызов всех методов и отображение результатов;
5. Использование принципов ООП и дженериков.
```

## Демонстрирует

использование дженериков (Generics);

применение функциональных интерфейсов;

реализацию ООП-принципов (инкапсуляция, композиция, неизменяемость);

работу map/filter/reduce над коллекциями;

валидацию ввода и обработку исключений.

## Автор: Белоногов Всеволод Алексеевич
Группа: ИТ-9
Год: 2025
